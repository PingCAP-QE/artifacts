ARG PINGCAP_BASE
FROM $PINGCAP_BASE

# ğŸ“„ Core text / navigation tools: ripgrep
# ğŸ”§ General System Inspection: procps-ng htop iotop atop dstat lsof strace perf
RUN --mount=type=cache,id=dnf-cache,target=/var/cache/dnf \
    dnf install -y epel-release && \
    dnf install -y \
    ripgrep
# procps-ng htop iotop atop dstat lsof strace perf

### ğŸ–¥ **CPU & Performance**

# * `mpstat` (from `sysstat`) â†’ per-CPU utilization
# * `pidstat` â†’ per-process CPU, memory, IO
# * `stress` or `stress-ng` â†’ load generator for CPU/memory/disk/network
# * `perf-tools` (e.g., `funccount`, `execsnoop`) â†’ deeper kernel/CPU tracing


### ğŸ’¾ **Memory**

# * `free` â†’ quick memory usage
# * `smem` â†’ memory usage per process with shared memory reporting
# * `pmap` â†’ process memory map
# * `numastat` â†’ NUMA memory stats
# * `valgrind` (optional, heavy) â†’ memory debugging / leaks (useful for dev builds)


### ğŸ“€ **Disk / IO**

# * `iotop` â†’ IO usage
# * `iostat` (from `sysstat`) â†’ block device IO
# * `blktrace` + `blkparse` â†’ detailed block-level tracing
# * `fio` â†’ flexible IO workload generator
# * `dd` â†’ quick read/write speed tests
# * `lsblk`, `df`, `du` â†’ disk layout and usage


### ğŸŒ **Network**

# * `iftop` â†’ live network usage per connection
# * `nethogs` â†’ per-process bandwidth
# * `ss` / `netstat` â†’ socket statistics
# * `tcpdump` â†’ packet capture
# * `iperf3` â†’ network throughput testing
# * `dig`, `curl`, `wget` â†’ DNS/HTTP testing
# * `ethtool` â†’ NIC statistics
# * `traceroute`, `mtr` â†’ path and latency diagnostics

### ğŸ› **Debugging / Tracing**

# * `gdb` â†’ debugger
# * `bpftrace` / `bcc` tools (if kernel supports it) â†’ powerful tracing
# * `strace` / `ltrace` â†’ syscall and library call tracing

### ğŸ§° **Useful Misc**

# * `busybox` â†’ Swiss army knife for small utilities
# * `file` â†’ check file types
# * `hexdump` / `xxd` â†’ binary inspection
# * `jq` â†’ JSON parser (for logs and configs)
# * `nc` / `socat` â†’ networking testing
# * `tmux` â†’ for long-running debug sessions inside container


### ğŸ¢ **Company Tools**
# * TiUp

# if you want tidb-ctl, pd-ctl, tikv-ctl tool, you can install them with tiup tool:
# tiup tidb-ctl ...

# mok / tiup  / rg /

# yaml-language-server: $schema=./delivery-schema.json
image_copy_rules:
  hub.pingcap.net/pingcap/tidb/images/tidb-server:
    - description: delivery the trunk branch images.
      tags_regex: [^master$]
      dest_repositories: # full repo url
        - docker.io/pingcap/tidb
      constant_tags: [nightly] # add new tags.
    - description: publish latest image
      tags_regex: [^latest$]
      dest_repositories: # full repo url
        - docker.io/pingcap/tidb
  hub.pingcap.net/pingcap/tiproxy/image:
    - description: publish trunk and version images.
      tags_regex:
        - ^v\d+\.\d+\.\d
        - ^(main|master)(-.+)?$
      dest_repositories:
        - docker.io/pingcap/tiproxy
